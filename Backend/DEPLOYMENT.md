# EcoVision Backend Deployment Guide

## 🚀 Quick Deploy to Render

### 1. **Connect Your Repository**
- Go to [Render Dashboard](https://dashboard.render.com/)
- Click "New +" → "Web Service"
- Connect your GitHub repository

### 2. **Configure the Service**
- **Name**: `ecovision-backend`
- **Environment**: `Python`
- **Build Command**: `pip install -r requirements.txt`
- **Start Command**: `gunicorn wsgi:application --bind 0.0.0.0:$PORT`

### 3. **Environment Variables**
```
SECRET_KEY: [Auto-generated by Render]
DEBUG: false
ALLOWED_HOSTS: .onrender.com
DATABASE_URL: sqlite:///db.sqlite3
```

## 🔧 Manual Deployment

### 1. **Local Testing**
```bash
# Test WSGI configuration
python -c "import wsgi; print('WSGI import successful')"

# Check Django configuration
python manage.py check

# Test performance
python performance_monitor.py
```

### 2. **Deploy to Render**
```bash
# The render.yaml file is already configured
# Just push to your repository and Render will auto-deploy
```

## 📁 File Structure
```
Backend/
├── wsgi.py              # Main WSGI entry point
├── config/              # Django settings
├── accounts/            # Authentication app
├── buyer/               # Buyer app
├── seller/              # Seller app
├── render.yaml          # Render deployment config
├── Procfile            # Alternative deployment
└── requirements.txt     # Python dependencies
```

## 🐛 Troubleshooting

### Common Issues:

1. **ModuleNotFoundError: No module named 'EcoVision'**
   - ✅ **FIXED**: Use `gunicorn wsgi:application` instead of `gunicorn EcoVision.wsgi`

2. **Import Errors**
   - ✅ **FIXED**: WSGI file properly configured with correct Python path

3. **Database Issues**
   - ✅ **FIXED**: SQLite database optimized for production

4. **Performance Issues**
   - ✅ **FIXED**: Caching, indexes, and optimizations implemented

## 🚀 Performance Features

- **Database Indexes**: Added on frequently queried fields
- **Caching Layer**: Local memory cache for authentication
- **Connection Pooling**: Database connection reuse
- **Query Optimization**: Reduced database queries
- **SQLite Optimization**: WAL mode, optimized page size

## 📊 Monitoring

Run these commands to monitor performance:
```bash
python performance_monitor.py    # Check authentication performance
python optimize_db.py           # Optimize database
```

## 🔒 Security

- CORS properly configured for production
- CSRF protection enabled
- Rate limiting implemented
- Environment-based configuration

## 📞 Support

If you encounter issues:
1. Check the logs in Render dashboard
2. Run local tests with `python manage.py check`
3. Verify WSGI configuration with `python -c "import wsgi"`
